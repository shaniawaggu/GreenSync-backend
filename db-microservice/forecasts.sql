DROP TABLE IF EXISTS users, forecasts, evcharginglocations, activepowerdata;

CREATE TABLE users (
    user_id INT GENERATED ALWAYS AS IDENTITY,
    name VARCHAR(50) NOT NULL,
    email VARCHAR(50) NOT NULL,
    password_hash VARCHAR(100) NOT NULL,
    postcode VARCHAR(50) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP, -- should be created automatically
    PRIMARY KEY (user_id)
);

CREATE TABLE forecasts (
    forecast_id INT GENERATED ALWAYS AS IDENTITY,
    dateAndTime VARCHAR(25),
    estimatedEnergy DECIMAL(50,5),
    windEnergy DECIMAL(50,5),
    solarEnergy DECIMAL(50,5),
    PRIMARY KEY (forecast_id)
);

CREATE TABLE evcharginglocations (
    ev_location_id INT GENERATED ALWAYS AS IDENTITY,
    licence_area VARCHAR(50),
    primary_name VARCHAR(100),
    latitude DECIMAL(10,8),
    longitude DECIMAL(11,8),
    PRIMARY KEY (ev_location_id)
);

INSERT INTO evcharginglocations (licence_area, primary_name, latitude, longitude) VALUES
('East England', 'LITTLE BARFORD', 52.20651666, -0.268171894),
    ('East England', 'PETERBOROUGH SOUTH GRID 132/11kV', 52.55611699, -0.261857476),
    ('East England', 'PETERBOROUGH EAST GRID', 52.5871024, -0.217291123),
    ('East England', 'BRIMSDOWN SOUTH GRID', 51.65841562, -0.021267726),
    ('East England', 'PALMERS GRN GRID', 51.61606172, -0.113057906),
    ('East England', 'BELCHAMP GRID', 52.06914578, 0.605348195),
    ('East England', 'BURY GRID', 52.23970298, 0.722409752),
    ('East England', 'CORNARD PRIMARY', 52.0319522, 0.759281921),
    ('East England', 'WATER LN PRIMARY', 52.41540436, 0.743753609),
    ('East England', 'KIMMS BELT PRIMARY', 52.40436575, 0.733864098),
    ('East England', 'LAKENHEATH PRIMARY', 52.39167399, 0.532251795),
    ('East England', 'PLAYFIELD PRIMARY', 52.24571827, 0.707600174),
    ('East England', 'GLEMSFORD PRIMARY', 52.08546552, 0.678834951),
    ('East England', 'FELTWELL PRIMARY', 52.48624833, 0.53380827),
    ('East England', 'FORE HAMLET PRIMARY', 52.05244834, 1.169064888),
    ('East England', 'ROUNDWOOD RD PRIMARY', 52.06228631, 1.182456633),
    ('East England', 'GUSFORD HALL PRIMARY', 52.03722138, 1.128042776),
    ('East England', 'HADLEIGH PRIMARY', 52.04518334, 0.960993783),
    ('East England', 'THETFORD GRID', 52.3872191, 0.736478403),
    ('East England', 'CLAYDON CEMENT PRIMARY', 52.10974793, 1.096719053),
    ('East England', 'DEBENHAM PRIMARY', 52.21903865, 1.184873206),
    ('East England', 'DOVERCOURT PRIMARY', 51.93495412, 1.272070084),
    ('East England', 'TAKELEY PRIMARY', 51.87203755, 0.261103751),
    ('East England', 'THAXTED LOCAL', 51.96595732, 0.360396846),
    ('East England', 'WEST HANNINGFIELD PRI', 51.66416096, 0.520001881),
    ('East England', 'BRAINTREE DEPOT PRIMARY', 51.88240425, 0.572372305),
    ('East England', 'PARSONS HEATH PRIMARY', 51.89907045, 0.938141702),
    ('East England', 'WEST CHELMSFORD PRIMARY', 51.73004851, 0.454425943),
    ('East England', 'WHITE RODING PRIMARY', 51.79983153, 0.273921972),
    ('East England', 'FOXASH PRIMARY', 51.93734466, 1.023435545),
    ('East England', 'SEVERALLS LN PRIMARY', 51.92645194, 0.916262964),
    ('East England', 'WITHAM PRIMARY', 51.80902556, 0.641891289),
    ('East England', 'OLD RD PRIMARY', 51.7908144, 1.145471567),
    ('East England', 'LAKE AND ELLIOT PRIMARY', 51.87398213, 0.56558595),
    ('East England', 'SHRUB END PRIMARY', 51.86992958, 0.86531303),
    ('East England', 'BASSINGBOURN PRIMARY', 52.07706161, -0.052438295),
    ('East England', 'SOHAM PRIMARY', 52.32597018, 0.341668095),
    ('East England', 'ALDRETH PRIMARY', 52.33938163, 0.124567064),
    ('East England', 'OFFORD PRIMARY', 52.28097664, -0.226553836),
    ('East England', 'ST IVES PRIMARY', 52.33483704, -0.067362351),
    ('East England', 'MARSTON RD PRIMARY', 52.07754475, -0.531954989),
    ('East England', 'SANDY PRIMARY', 52.12641148, -0.281052736),
    ('East England', 'STOREYS WAY PRIMARY', 52.2129414, 0.105353642),
    ('East England', 'BARNWELL PRIMARY', 52.21294929, 0.147819289),
    ('East England', 'BRINGTON PRIMARY', 52.36837771, -0.40886565),
    ('East England', 'BROGBOROUGH PRIMARY', 52.04139411, -0.588910667),
    ('East England', 'HISTON PRIMARY', 52.2438525, 0.106523771),
    ('East England', 'LINTON PRIMARY', 52.1193713, 0.294243433),
    ('East England', 'MILTON RD PRIMARY', 52.22968942, 0.146987205),
    ('East England', 'BURWELL PRIMARY', 52.27713244, 0.31805539),
    ('East England', 'WEST BEDFORD PRIMARY', 52.10672288, -0.50558946),
    ('East England', 'BOUNDARY PARK PRIMARY', 52.65584145, 1.271539533),
    ('East England', 'BRADWELL PRIMARY', 52.55519201, 1.7115138),
    ('East England', 'EARLHAM GRID LOCAL B', 52.62964522, 1.227237376),
    ('East England', 'PEASENHALL PRIMARY', 52.27453583, 1.447052661),
    ('East England', 'WROXHAM PRIMARY', 52.71603098, 1.407588837),
    ('East England', 'KNAPTON PRIMARY', 52.85620088, 1.434021521),
    ('East England', 'MARTHAM PRIMARY', 52.70278044, 1.636025022),
    ('East England', 'FRAMLINGHAM PRIMARY', 52.23019569, 1.324820828),
    ('East England', 'MOUSEHOLD PRIMARY', 52.64166371, 1.3271802),
    ('East England', 'STALHAM PRIMARY', 52.77352772, 1.511444044),
    ('East England', 'EARLHAM GRID LOCAL B', 52.62998468, 1.227321496),
    ('East England', 'HARLESTON PRIMARY', 52.39542922, 1.292248574),
    ('East England', 'SPROWSTON PRIMARY', 52.6584502, 1.335658922),
    ('East England', 'HARDINGHAM PRIMARY', 52.60129876, 1.022500587),
    ('East England', 'ORMESBY PRIMARY', 52.68089651, 1.689244797),
    ('East England', 'WESTON LONGVILLE PRIMARY', 52.69935338, 1.087555907),
    ('East England', 'AUSTIN STREET PRIMARY', 52.75766003, 0.399591494),
    ('East England', 'HUNSTANTON PRIMARY', 52.93676296, 0.498979149),
    ('East England', 'LEVERINGTON PRIMARY', 52.67622969, 0.143095856),
    ('East England', 'FAKENHAM PRIMARY', 52.83003169, 0.845897148),
    ('East England', 'FAIRSTEAD PRIMARY', 52.74757335, 0.430835735),
    ('East England', 'GUYHIRN PRIMARY', 52.61842583, 0.076894329),
    ('East England', 'HARDWICK RD PRIMARY', 52.74064748, 0.408034645),
    ('East England', 'STICKFAST LN PRIMARY', 52.73093792, 0.217613368),
    ('East England', 'UPWELL LAKES END PRIMARY', 52.54196454, 0.236685468),
    ('East England', 'NORTHWOLD PRIMARY', 52.55121068, 0.561241507),
    ('East England', 'ORTON PRIMARY', 52.54099017, -0.305602476),
    ('East England', 'WALSOKEN GRID', 52.66071154, 0.190248155),
    ('East England', 'ROMFORD NORTH PRIMARY', 51.58574763, 0.168040522),
    ('East England', 'FLEETHALL LOCAL PRIMARY', 51.57066776, 0.733614357),
    ('East England', 'GOOSEBERRY GRN PRIMARY', 51.63156761, 0.404784259),
    ('East England', 'HAINAULT AV PRIMARY', 51.59163425, 0.692293405),
    ('East England', 'THORLEY PRIMARY', 51.84774386, 0.156507335),
    ('East England', 'BATA PRIMARY', 51.48285337, 0.414566324),
    ('East England', 'BILLERICAY EAST PRIMARY', 51.62192983, 0.446851879),
    ('East England', 'THORPE BAY PRIMARY', 51.5371201, 0.764354408),
    ('East England', 'BROXBOURNE PRIMARY', 51.74530228, -0.013402583),
    ('East England', 'RAYLEIGH LOCAL', 51.58698775, 0.594770008),
    ('East England', 'MUCH HADHAM PRIMARY', 51.85833619, 0.067409163),
    ('East England', 'TURNFORD PRIMARY', 51.7191306, -0.027579847),
    ('East England', 'BRUCE GV PRIMARY', 51.59861792, -0.076037112),
    ('East England', 'CENTRAL EDMONTON PRIMARY', 51.62624954, -0.060059158),
    ('East England', 'CENTRAL HARPENDEN PRI', 51.81678293, -0.354666772),
    ('East England', 'DURHAM RD PRIMARY', 51.5695871, 0.417471949),
    ('East England', 'HADLEIGH PRI ESSEX', 51.55976806, 0.601516131),
    ('East England', 'KINGSWOOD PRIMARY', 51.56743671, 0.453044253),
    ('East England', 'NORTH CHINGFORD PRIMARY', 51.63177925, 0.003163512),
    ('East England', 'BRENTWOOD PRIMARY', 51.61413517, 0.302285011),
    ('East England', 'HANGER LEA PRIMARY', 51.88261317, 0.169887616);

CREATE TABLE activepowerdata (
    active_power_id INT GENERATED ALWAYS AS IDENTITY,
    date_time TIMESTAMP,
    active_power_avg FLOAT,
    PRIMARY KEY (active_power_id)
);

INSERT INTO activepowerdata (date_time, active_power_avg) VALUES
('2025-01-13 00:00:00', 12244.35),
('2025-01-13 01:00:00', 9069.11),
('2025-01-13 02:00:00', 8740.25),
('2025-01-13 03:00:00', 8616.73),
('2025-01-13 04:00:00', 8343.69),
('2025-01-13 05:00:00', 8321.92),
('2025-01-13 06:00:00', 8915.460000000001),
('2025-01-13 07:00:00', 10910.32),
('2025-01-13 08:00:00', 12552.64),
('2025-01-13 09:00:00', 13133.43),
('2025-01-13 10:00:00', 13559.75),
('2025-01-13 11:00:00', 13261.8),
('2025-01-13 12:00:00', 13356.64),
('2025-01-13 13:00:00', 13577.26),
('2025-01-13 14:00:00', 13494.4),
('2025-01-13 15:00:00', 13591.01),
('2025-01-13 16:00:00', 14374.619999999999),
('2025-01-13 17:00:00', 14730.53),
('2025-01-13 18:00:00', 14808.35),
('2025-01-13 19:00:00', 14601.04),
('2025-01-13 20:00:00', 14939.53),
('2025-01-13 21:00:00', 14547.0),
('2025-01-13 22:00:00', 13584.31),
('2025-01-13 23:00:00', 12454.81),
('2025-01-14 00:00:00', 11639.94),
('2025-01-14 01:00:00', 9385.32),
('2025-01-14 02:00:00', 8999.1),
('2025-01-14 03:00:00', 8861.01),
('2025-01-14 04:00:00', 8823.35),
('2025-01-14 05:00:00', 8696.39),
('2025-01-14 06:00:00', 9181.18),
('2025-01-14 07:00:00', 10882.81),
('2025-01-14 08:00:00', 12712.51),
('2025-01-14 09:00:00', 13161.59),
('2025-01-14 10:00:00', 13669.02),
('2025-01-14 11:00:00', 13580.18),
('2025-01-14 12:00:00', 13130.8),
('2025-01-14 13:00:00', 13252.37),
('2025-01-14 14:00:00', 13209.45),
('2025-01-14 15:00:00', 13414.2),
('2025-01-14 16:00:00', 13749.76),
('2025-01-14 17:00:00', 14075.289999999999),
('2025-01-14 18:00:00', 14121.49),
('2025-01-14 19:00:00', 14253.5),
('2025-01-14 20:00:00', 13844.07),
('2025-01-14 21:00:00', 14017.69),
('2025-01-14 22:00:00', 12929.66),
('2025-01-14 23:00:00', 12546.14),
('2025-01-15 00:00:00', 11978.12),
('2025-01-15 01:00:00', 9177.630000000001),
('2025-01-15 02:00:00', 8822.58),
('2025-01-15 03:00:00', 8467.92),
('2025-01-15 04:00:00', 8245.44),
('2025-01-15 05:00:00', 8295.97),
('2025-01-15 06:00:00', 9380.31),
('2025-01-15 07:00:00', 11097.86),
('2025-01-15 08:00:00', 12198.13),
('2025-01-15 09:00:00', 12650.62),
('2025-01-15 10:00:00', 13423.34),
('2025-01-15 11:00:00', 13500.37),
('2025-01-15 12:00:00', 13592.14),
('2025-01-15 13:00:00', 13918.39),
('2025-01-15 14:00:00', 13601.58),
('2025-01-15 15:00:00', 13547.1),
('2025-01-15 16:00:00', 13567.31),
('2025-01-15 17:00:00', 13860.92),
('2025-01-15 18:00:00', 14127.98),
('2025-01-15 19:00:00', 13639.26),
('2025-01-15 20:00:00', 13094.26),
('2025-01-15 21:00:00', 13118.68),
('2025-01-15 22:00:00', 12049.64),
('2025-01-15 23:00:00', 11086.74),
('2025-01-16 00:00:00', 10948.38),
('2025-01-16 01:00:00', 9055.34),
('2025-01-16 02:00:00', 8651.99),
('2025-01-16 03:00:00', 8390.05),
('2025-01-16 04:00:00', 8271.38),
('2025-01-16 05:00:00', 8396.57),
('2025-01-16 06:00:00', 9034.04),
('2025-01-16 07:00:00', 10610.59),
('2025-01-16 08:00:00', 11647.53),
('2025-01-16 09:00:00', 12217.04),
('2025-01-16 10:00:00', 12925.4),
('2025-01-16 11:00:00', 12850.27),
('2025-01-16 12:00:00', 12855.47),
('2025-01-16 13:00:00', 13297.19),
('2025-01-16 14:00:00', 13417.1),
('2025-01-16 15:00:00', 13361.54),
('2025-01-16 16:00:00', 13335.09),
('2025-01-16 17:00:00', 13788.36),
('2025-01-16 18:00:00', 14053.43),
('2025-01-16 19:00:00', 13807.03),
('2025-01-16 20:00:00', 13642.14),
('2025-01-16 21:00:00', 13298.66),
('2025-01-16 22:00:00', 12674.76),
('2025-01-16 23:00:00', 11721.87),
('2025-01-17 00:00:00', 11399.18),
('2025-01-17 01:00:00', 8900.8),
('2025-01-17 02:00:00', 8662.17),
('2025-01-17 03:00:00', 8442.23),
('2025-01-17 04:00:00', 8209.51),
('2025-01-17 05:00:00', 8188.0),
('2025-01-17 06:00:00', 8888.77),
('2025-01-17 07:00:00', 10334.74),
('2025-01-17 08:00:00', 12133.65),
('2025-01-17 09:00:00', 12944.1),
('2025-01-17 10:00:00', 13531.35),
('2025-01-17 11:00:00', 13826.94),
('2025-01-17 12:00:00', 13966.19),
('2025-01-17 13:00:00', 14314.65),
('2025-01-17 14:00:00', 14193.03),
('2025-01-17 15:00:00', 14467.27),
('2025-01-17 16:00:00', 14341.12),
('2025-01-17 17:00:00', 14366.33),
('2025-01-17 18:00:00', 14542.1),
('2025-01-17 19:00:00', 14475.57),
('2025-01-17 20:00:00', 15000.73),
('2025-01-17 21:00:00', 14487.81),
('2025-01-17 22:00:00', 13515.94),
('2025-01-17 23:00:00', 12821.75),
('2025-01-18 00:00:00', 12796.72),
('2025-01-18 01:00:00', 9730.58),
('2025-01-18 02:00:00', 9328.74),
('2025-01-18 03:00:00', 9144.39),
('2025-01-18 04:00:00', 8738.83),
('2025-01-18 05:00:00', 8758.91),
('2025-01-18 06:00:00', 8929.38),
('2025-01-18 07:00:00', 9528.0),
('2025-01-18 08:00:00', 10165.62),
('2025-01-18 09:00:00', 11036.11),
('2025-01-18 10:00:00', 11903.83),
('2025-01-18 11:00:00', 12471.47),
('2025-01-18 12:00:00', 13173.19),
('2025-01-18 13:00:00', 13267.22),
('2025-01-18 14:00:00', 13270.82),
('2025-01-18 15:00:00', 13233.460000000001),
('2025-01-18 16:00:00', 13255.17),
('2025-01-18 17:00:00', 13635.28),
('2025-01-18 18:00:00', 13693.76),
('2025-01-18 19:00:00', 13922.67),
('2025-01-18 20:00:00', 13701.84),
('2025-01-18 21:00:00', 13235.95),
('2025-01-18 22:00:00', 13139.46),
('2025-01-18 23:00:00', 12325.08),
('2025-01-19 00:00:00', 12466.25),
('2025-01-19 01:00:00', 9770.99),
('2025-01-19 02:00:00', 9171.78),
('2025-01-19 03:00:00', 8997.61),
('2025-01-19 04:00:00', 8720.6),
('2025-01-19 05:00:00', 8538.19),
('2025-01-19 06:00:00', 8590.47),
('2025-01-19 07:00:00', 8913.89),
('2025-01-19 08:00:00', 9448.71),
('2025-01-19 09:00:00', 10723.4),
('2025-01-19 10:00:00', 11823.45),
('2025-01-19 11:00:00', 12729.23),
('2025-01-19 12:00:00', 13253.37),
('2025-01-19 13:00:00', 13538.72),
('2025-01-19 14:00:00', 13518.039999999999),
('2025-01-19 15:00:00', 13900.49),
('2025-01-19 16:00:00', 14030.54),
('2025-01-19 17:00:00', 14376.01),
('2025-01-19 18:00:00', 14641.99),
('2025-01-19 19:00:00', 14313.48),
('2025-01-19 20:00:00', 14244.99),
('2025-01-19 21:00:00', 13751.15),
('2025-01-19 22:00:00', 13182.41),
('2025-01-19 23:00:00', 12626.13),
('2025-01-20 00:00:00', 12469.74),
('2025-01-20 01:00:00', 4455.9),
('2025-01-20 02:00:00', 4259.93),
('2025-01-20 03:00:00', 4152.73),
('2025-01-20 04:00:00', 4102.72),
('2025-01-20 05:00:00', 4123.62),
('2025-01-20 06:00:00', 4495.59),
('2025-01-20 07:00:00', 5376.82),
('2025-01-20 08:00:00', 6215.88),
('2025-01-20 09:00:00', 6652.02),
('2025-01-20 10:00:00', 6944.29),
('2025-01-20 11:00:00', 7027.26),
('2025-01-20 12:00:00', 7002.69),
('2025-01-20 13:00:00', 7038.55),
('2025-01-20 14:00:00', 6922.93),
('2025-01-20 15:00:00', 6918.6),
('2025-01-20 16:00:00', 6948.87),
('2025-01-20 17:00:00', 7115.56),
('2025-01-20 18:00:00', 7233.139999999999),
('2025-01-20 19:00:00', 7243.33),
('2025-01-20 20:00:00', 6786.25),
('2025-01-20 21:00:00', 6221.02),
('2025-01-20 22:00:00', 5642.12),
('2025-01-20 23:00:00', 5050.24);
